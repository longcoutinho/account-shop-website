(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9190],{4476:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return s(3527)}])},9202:function(e,t,s){"use strict";var l=s(5893);s(7294);var n=s(9008),i=s.n(n),a=s(118),r=s(9562),c=s(5616),o=s(2119),h=s(6127),d=s(1163);let x=e=>{let{children:t,title:s,admin:n,menuIndex:x,cartAmount:u,isHome:p}=e;return(0,d.useRouter)(),(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,l.jsx)(i(),{children:(0,l.jsx)("title",{children:a.Ti.PREFIX+s})}),(0,l.jsx)(o.Z,{}),(0,l.jsxs)(c.Z,{className:"w-full flex flex-col h-screen overflow-y-auto overflow-x-hidden",children:[(0,l.jsx)(r.Z,{}),(0,l.jsxs)("div",{className:"min-h-[calc(100vh-78px)] mt-[78px]",children:[(0,l.jsx)("div",{className:" max-w-[1960px] mx-auto w-full pt-10 px-[2%] sm:px-[5%] min-h-[calc(100%-188px)] lg:min-h-[calc(100%-164px)] pb-8",children:t}),(0,l.jsx)(h.Z,{})]})]})]})};t.Z=x},3527:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _}});var l=s(5893),n=s(118),i=s(9202),a=s(5616),r=s(6628),c=s(8434),o=s(966),h=s(9417);s(4950),s(4233),s(4256),s(7775);var d=s(2489),x=s(4544),u=s(7294),p=s(6154),j=s(7906),g=s(295),m=s(3252),Z=s(2882),f=s(3184),w=s(3816),N=s(629),b=s(9154),S=s(1649),v=s(1163);function _(){let[e,t]=(0,u.useState)([]),[s,_]=(0,u.useState)(0),y=(0,v.useRouter)(),T=e=>({type:"ASSIGN",payload:e}),k=(0,S.I0)();(0,u.useEffect)(()=>{var e=window.localStorage.getItem("cart");console.log(e);var s=[];null!=e&&(s=JSON.parse(window.localStorage.getItem("cart")||""));for(var l=0,n=0;n<s.length;n++)l+=s[n].totalPrice;t(s),_(l)},[]);let E=e=>{let s=(0,b.ug)(e);t(s),_(0),k(T(s.length)),window.localStorage.setItem("cart",JSON.stringify(s))},A=()=>{window.localStorage.setItem("cart",JSON.stringify([]))},C=()=>(0,l.jsxs)("div",{className:"cart-table",children:[(0,l.jsx)("h1",{className:"cart-title",children:"Giỏ h\xe0ng của bạn"}),(0,l.jsx)(Z.Z,{component:N.Z,children:(0,l.jsxs)(j.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,l.jsx)(f.Z,{children:(0,l.jsxs)(w.Z,{className:"title-cart-table",children:[(0,l.jsx)(m.Z,{children:"STT"}),(0,l.jsx)(m.Z,{children:"T\xean sản phẩm"}),(0,l.jsx)(m.Z,{children:"Đơn gi\xe1 (VNĐ)"}),(0,l.jsx)(m.Z,{children:"Số lượng"}),(0,l.jsx)(m.Z,{children:"Th\xe0nh tiền (VNĐ)"}),(0,l.jsx)(m.Z,{children:"X\xf3a"})]})}),(0,l.jsx)(g.Z,{children:e.map((e,t)=>(0,l.jsxs)(w.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},className:"content-cart-table",children:[(0,l.jsx)(m.Z,{children:t+1}),(0,l.jsx)(m.Z,{children:e.title}),(0,l.jsx)(m.Z,{sx:{color:"#eb1b24"},children:(0,b.hA)(e.price,!0)}),(0,l.jsx)(m.Z,{children:e.amount}),(0,l.jsx)(m.Z,{sx:{color:"#eb1b24"},children:(0,b.hA)(e.totalPrice,!0)}),(0,l.jsx)(m.Z,{children:(0,l.jsx)(d.G,{onClick:()=>E(t),style:{color:"black"},icon:x.$aW,id:"delete-cart-item"})})]},e.title))})]})}),(0,l.jsxs)("h1",{className:"cart-title",style:{marginTop:"20px"},children:["Tổng gi\xe1 trị đơn h\xe0ng:",(0,l.jsxs)("span",{style:{color:"#eb1b24",fontSize:"20px"},children:[" ",(0,b.hA)(s,!1)]})]})]}),I=()=>{let[t,s]=(0,u.useState)(""),[i,d]=(0,u.useState)(""),[x,j]=(0,u.useState)(""),[g,m]=(0,u.useState)(!1),[Z,f]=(0,u.useState)(""),[w,N]=(0,u.useState)(""),b=()=>(0,l.jsx)(a.Z,{sx:{position:"fixed",top:"0px",right:"0px"},children:(0,l.jsx)(r.Z,{in:g,timeout:{enter:1e3,exit:1e3},addEndListener:()=>{setTimeout(()=>{m(!1)},2e3)},children:(0,l.jsx)(c.Z,{severity:w,variant:"standard",className:"alert",children:Z})})}),S=()=>{let s=[];for(let t=0;t<e.length;t++)s[t]=Object.assign({},e[t]),s[t].itemId=e[t].id,s[t]=(e=>{let{itemId:t,amount:s}=e;return{itemId:t,amount:s}})(s[t]);console.log("send"),console.log(s),(0,p.Z)({headers:{Accept:"*/*",accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"},method:"post",url:n.zj.BASE_URL+"/order",data:{cart:s,name:t,address:x,phone:i}}).then(e=>{m(!0),N("success"),f("Đặt h\xe0ng th\xe0nh c\xf4ng!"),A(),y.push("/item?page=0&pageSize=9")},e=>{m(!0),N("error"),f(e.response.data)})};return(0,l.jsxs)(a.Z,{className:"cart-info",children:[(0,l.jsx)("h1",{className:"cart-title",children:"Th\xf4ng tin đơn h\xe0ng"}),(0,l.jsxs)(a.Z,{className:"cart-input",children:[(0,l.jsxs)(a.Z,{className:"cart-input_item",children:[(0,l.jsx)("p",{children:"Họ v\xe0 t\xean"}),(0,l.jsx)(o.Z,{sx:{width:"100%",background:"white"},id:"title-post",placeholder:"Write here",onChange:e=>{console.log(e.target.value),s(e.target.value)}})]}),(0,l.jsxs)(a.Z,{className:"cart-input_item",children:[(0,l.jsx)("p",{children:"Số điện thoại"}),(0,l.jsx)(o.Z,{sx:{width:"100%",background:"white"},id:"title-post",placeholder:"Write here",onChange:e=>{console.log(e.target.value),d(e.target.value)}})]}),(0,l.jsxs)(a.Z,{className:"cart-input_item",children:[(0,l.jsx)("p",{children:"Địa chỉ"}),(0,l.jsx)(o.Z,{sx:{width:"100%",background:"white"},id:"title-post",placeholder:"Write here",onChange:e=>{console.log(e.target.value),j(e.target.value)}})]}),(0,l.jsx)(h.Z,{onClick:()=>S(),style:{background:"#eb1b24",color:"white",width:"90%",padding:"7px 0",borderRadius:"20px",fontSize:"18px",fontWeight:"700"},children:"Đặt h\xe0ng"})]}),(0,l.jsx)(b,{})]})};return(0,l.jsx)(i.Z,{title:n.Ti.HOME,menuIndex:0,children:(0,l.jsx)(a.Z,{className:"cart-detail-content",children:(0,l.jsxs)(a.Z,{className:"cart-content",children:[(0,l.jsx)(C,{}),(0,l.jsx)(I,{})]})})})}}},function(e){e.O(0,[4976,3662,8296,6710,966,9097,8434,1377,9774,2888,179],function(){return e(e.s=4476)}),_N_E=e.O()}]);